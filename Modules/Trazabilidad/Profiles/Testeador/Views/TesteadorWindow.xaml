<Window x:Class="AplicacionDespacho.Modules.Trazabilidad.Profiles.Testeador.Views.TesteadorWindow"  
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"  
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"  
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"  
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"  
        mc:Ignorable="d"  
        Title="Trazabilidad - Testeador de Pallets" Height="700" Width="1000"  
        WindowStartupLocation="CenterScreen">

    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Título -->
        <TextBlock Grid.Row="0" Text="Módulo de Testing - Consulta y Eliminación de Pallets"   
                   FontSize="20" FontWeight="Bold" Margin="0,0,0,20"/>

        <!-- Panel de búsqueda -->
        <GroupBox Grid.Row="1" Header="Buscar Pallet" Margin="0,0,0,10">
            <StackPanel Orientation="Horizontal" Margin="10">
                <Label Content="Número de Pallet:" VerticalAlignment="Center"/>
                <TextBox x:Name="txtNumeroPallet" Width="200" Margin="10,0"   
                         Text="{Binding NumeroPalletBusqueda, UpdateSourceTrigger=PropertyChanged}"/>
                <Button Content="Buscar" Width="100" Height="30"   
                        Command="{Binding ComandoBuscarPallet}"/>
                <Button Content="Limpiar" Width="100" Height="30" Margin="10,0,0,0"  
                        Command="{Binding ComandoLimpiar}"/>
            </StackPanel>
        </GroupBox>

        <!-- Información del pallet -->
        <GroupBox Grid.Row="2" Header="Información del Pallet" Margin="0,0,0,10">
            <Grid DataContext="{Binding PalletSeleccionado}">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <!-- Información básica -->
                <StackPanel Grid.Row="0" Margin="10">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>

                        <Label Grid.Row="0" Grid.Column="0" Content="Pallet:" FontWeight="Bold"/>
                        <TextBox Grid.Row="0" Grid.Column="1" Text="{Binding NumeroPallet}"   
                                 IsReadOnly="True" Margin="5,0,10,0"/>

                        <Label Grid.Row="0" Grid.Column="2" Content="Total Cajas:" FontWeight="Bold"/>
                        <TextBox Grid.Row="0" Grid.Column="3" Text="{Binding TotalCajas}"   
                                 IsReadOnly="True" Margin="5,0,0,0"/>

                        <Label Grid.Row="1" Grid.Column="0" Content="Variedad:" FontWeight="Bold"/>
                        <TextBox Grid.Row="1" Grid.Column="1" Text="{Binding Variedad}"   
                                 IsReadOnly="True" Margin="5,0,10,0"/>

                        <Label Grid.Row="1" Grid.Column="2" Content="Calibre:" FontWeight="Bold"/>
                        <TextBox Grid.Row="1" Grid.Column="3" Text="{Binding Calibre}"   
                                 IsReadOnly="True" Margin="5,0,0,0"/>

                        <Label Grid.Row="2" Grid.Column="0" Content="Embalaje:" FontWeight="Bold"/>
                        <TextBox Grid.Row="2" Grid.Column="1" Text="{Binding Embalaje}"   
                                 IsReadOnly="True" Margin="5,0,10,0"/>

                        <Label Grid.Row="2" Grid.Column="2" Content="Estado:" FontWeight="Bold"/>
                        <TextBox Grid.Row="2" Grid.Column="3" Text="{Binding EstadoValidacion}"   
                                 IsReadOnly="True" Margin="5,0,0,0"  
                                 Foreground="{Binding EstadoValidacionColor}"/>
                    </Grid>
                </StackPanel>

                <!-- DataGrid de lotes/cuarteles -->
                <DataGrid Grid.Row="1" ItemsSource="{Binding Lotes}"   
                          AutoGenerateColumns="False" IsReadOnly="True"  
                          Margin="10">
                    <DataGrid.Columns>
                        <DataGridTextColumn Header="Cuartel" Binding="{Binding CodigoCuartel}" Width="100"/>
                        <DataGridTextColumn Header="CSG Predio" Binding="{Binding CSGPredio}" Width="150"/>
                        <DataGridTextColumn Header="Predio" Binding="{Binding NombrePredio}" Width="200"/>
                        <DataGridTextColumn Header="Productor" Binding="{Binding NombreProductor}" Width="200"/>
                        <DataGridTextColumn Header="Cajas" Binding="{Binding CantidadCajas}" Width="80"/>
                    </DataGrid.Columns>
                </DataGrid>

                <!-- Mensaje cuando no hay pallet seleccionado -->
                <TextBlock Grid.Row="1" Text="No hay pallet seleccionado. Use el campo de búsqueda arriba."  
                           HorizontalAlignment="Center" VerticalAlignment="Center"  
                           FontSize="14" Foreground="Gray"  
                           Visibility="{Binding PalletSeleccionado, Converter={StaticResource NullToVisibilityConverter}}"/>
            </Grid>
        </GroupBox>

        <!-- Botones de acción -->
        <StackPanel Grid.Row="3" Orientation="Horizontal" HorizontalAlignment="Right">
            <Button Content="Eliminar Pallet" Width="150" Height="35"   
                    Command="{Binding ComandoEliminarPallet}"  
                    Background="#D32F2F" Foreground="White" FontWeight="Bold"  
                    Margin="0,0,10,0"/>
            <Button Content="Cerrar" Width="100" Height="35" Click="BtnCerrar_Click"/>
        </StackPanel>
    </Grid>
</Window>